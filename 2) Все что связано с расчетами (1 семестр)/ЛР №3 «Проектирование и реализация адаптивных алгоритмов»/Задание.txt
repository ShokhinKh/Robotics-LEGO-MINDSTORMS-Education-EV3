Задание 1
Реализовать настраиваемый алгоритм движения вдоль линии с учетом характеристик поля.

Методические указания по выполнению задания 1
В качестве основы необходимо взять адаптивный алгоритм, реализованный в лабораторной работе №1 в соответствии с заданием 1.

Модифицировать данный алгоритм, используя переменные для задания основных параметров, которые влияют на качество управления и могут изменяться в зависимости от условий. К таким параметрам относятся, например, минимальная (черный) и максимальная (белый) освещенности датчика, мощность моторов и др.

Задание параметров выполняется записью значений в соответствующие переменные в начале программы. На основе этих исходных параметров могут быть вычислены и сохранены в переменных другие значения, используемые для реализации алгоритма, например, средний уровень освещенности и др. Далее, в самом алгоритме вместо констант, указанных на входах блоков, должны быть использованы значения, считанные из соответствующих переменных.

Программа должна быть организована как последовательность 3-х частей, преобразованных в подпрограммы ("Мои блоки"):

Инициализация - запись в переменные исходных значений (могут быть измерены непосредственно).
Настройка - вычисление параметров, необходимых для реализации алгоритма (на основе исходных).
Алгоритм движения.
Используя 3 разных поля (разные радиусы поворота, разные характеристики полей) выполнить настройку алгоритма на каждый из них. С каждым полем проводится серия экспериментов: при изменении мощности от меньшей к большей (например, 10, 30, 50, 70, 90) определяется способность робота двигаться вдоль линии в каждую сторону - по внутренней и по внешней границам линии (поворачивая по траектории налево и направо). Движение по линии выполняется без ограничения по времени в программе.

Примечание. Если робот не способен двигаться по траектории при некотором значении мощности моторов (скорости), то он, как правило, не сможет двигаться по ней и при больших значениях. Поэтому при "срыве" алгоритма эксперимент с данным значением мощности необходимо повторить и убедиться, что робот действительно не способен двигаться по траектории. В таком случае эксперименты с большими значениями мощности проводить не надо.

Результаты экспериментов (параметры настройки алгоритма, радиус изгиба траектории (границы линии), работоспособность алгоритма при значениях мощности и направлениях движения) фиксируются в таблице:

* В ячейках таблицы для каждого направления движения при каждом значении мощности отмечается работоспособность алгоритма, например: «V» – устойчиво работает (робот движется вдоль линии), «X» – не работает (робот покидает траекторию), «–» – эксперимент не проводился. При использовании иных обозначений, их необходимо пояснить в примечаниях к таблице.

Задание 2
Выполнить настройку алгоритма для прохождения траектории с заданными геометрическими характеристиками.

Методические указания по выполнению задания 2
При движении робота по дуге, радиус поворота определяется отношением мощностей на левом и правом моторах, которое, в свою очередь, зависит от значения, поданного на вход рулевого управления. Этой величины может оказаться недостаточно для поворота с тем же радиусом, который имеет траектория, если при граничных значениях, полученных от датчика (уровень черного и белого), значение на входе рулевого управления не достигает соответствующей величины. Как следствие, радиус поворота робота будет большим и робот сойдет с траектории. Возможна и другая ситуация - получаемое значение рулевого управления слишком велико по модулю, что приводит к излишнему рысканию робота (слишком резкие повороты влево и вправо при следовании вдоль траектории) и, как следствие, падению продольной скорости робота и возможности потери траектории при увеличении мощности двигателей.

Для подстройки программы под конкретные характеристики поля (значения освещенности), параметры траектории (радиус) и конструктивные особенности робота (ширина колеи, положение датчика и др.) необходимо ввести масштабирование сигнала (умножение на коэффициент) в канале рулевого управления и задать такое значение повышающего (больше 1) или понижающего (от 0 до 1) коэффициента, которое позволит наиболее плавно проходить изгибы траектории с наименьшим возможным радиусом.

При выполнения этого задания необходимо:

определить минимальный радиус изгиба траектории ("самый крутой поворот");
определить минимальный радиус поворота робота при движении по чистому белому (или черному) участку поля;
найти коэффициент масштабирования как отношение полученных радиусов;
задать коэффициент масштабирования в программе при помощи переменной;
ввести в программу блок умножения значения рулевого управления на полученный коэффициент (выполнить масштабирование сигнала);
выполнить эксперимент для подтверждения правильности расчетов и изменений в программе (робот должен плавно проходить изгиб траектории).
Примечание. Даже при правильных расчетах может наблюдаться рыскание робота, особенно в начале движения, обусловленное его начальным положением (положение датчика относительно границы линии, угол между продольной осью робота и касательной к границе линии). Поэтому следует провести серию экспериментов, при которых движение не должно быть ограничено по времени (остановка программы выполняется вручную).

Задание 3
Усовершенствовать настраиваемый алгоритм для автоматического расчета параметров с учетом геометрических характеристик траектории и конструкции робота.

Методические указания по выполнению задания 3
При выполнения этого задания необходимо получить аналитическое выражение для коэффициента масштабирования рулевого управления, связывающее крайние значения датчика отраженного света (уровни черного и белого) с максимальными абсолютными значениями рулевого управления. Это выражение должно учитывать значения датчика, соответствующие уровням черного и белого, требуемый минимальный радиус поворота, ширину колеи робота (расстояние между колес). Эти же величины должны быть заданы в программе в качестве исходных.

Порядок получения выражения может быть следующим:

Зная радиус изгиба траектории и ширину колеи робота (расстояние между колес) можно определить радиусы траекторий двух колес при повороте.
Отношение найденных радиусов равно отношению пути, пройденного двумя колесами, следовательно, равно отношению их скоростей и отношению их мощностей.
Из полученного отношения мощностей определить максимальное по модулю значение рулевого управления.
Отношение найденного значения и максимального по модулю разностного значения от датчика является искомым коэффициентом.
Далее необходимо модифицировать программу из предыдущего задания следующим образом:

ввести переменные, задающие исходные значения радиуса поворота и ширины колеи;
ввести блок математики (целесообразно использовать блок математики в режиме "ADV" вместо последовательности из нескольких блоков с арифметическими операциями), вычисляющий коэффициент масштабирования по полученной формуле;
присвоить вычисленный коэффициент соответствующей переменной (введена при выполнении задания 2 в качестве исходного значения).
Выполнить серию экспериментов при возрастающих значениях мощности и сделать выводы о характере движения.

Представление результатов работы
Файл проекта
Один файл проекта должен содержать 3 программы: по одной в каждом задании (включая созданные и используемые в них собственные блоки).